
## TODOS
- test connections from iris to crm as Files.

- connect to onlinestore, for each customer, generate entry in table, code to export as csv to import in crm

- test out the Amazon Foreign table as csv or the Amazon as Data Import!

## Introduction
crm: some customer data exported as file, generated by myself to match the rest of the data

### Online retail dataset:
https://www.kaggle.com/datasets/lakshmi25npathi/online-retail-dataset?resource=download
Donwload with
#!/bin/bash
curl -L -o ./archive.zip\
https://www.kaggle.com/api/v1/datasets/download/lakshmi25npathi/online-retail-dataset

## First Steps for Quick Setup

### Start Containers

```
docker compose up --build
```

Enter Container and Run command
```
docker exec -it client /bin/bash
psql -h db -U admin -d favorita
```

## Foreign tables
create foreign server ext.favorita foreign data wrapper JDBC CONNECTION 'favorita'

create foreign table ext.mytable server ext.favorita table 'mytable'
[SQLCODE: <-400>:<Fatal error occurred>]
  [%msg: <Unexpected error occurred in generated CREATE FOREIGN TABLE code:org.postgresql.Driver>]

  But this work:
  create foreign table ext.mytable(ID BIGINT, firstname VARCHAR(50), age INT) server ext.favorita table 'mytable'

  select * from ext.mytable
  create table loc.families (id integer, lastname varchar(50))
  insert into loc.families(id,lastname) values (1,'Cooper')
  insert into loc.families(id,lastname) values (2,'Marley')

  select l.id,e.firstname,l.lastname from loc.families l left outer join ext.mytable e on l.id=e.id
